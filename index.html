<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>AI-Assisted Website Security Surface Scan | Urban Sentinel</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
body{font-family:system-ui;background:#0f1115;color:#e6e6e6;padding:40px;margin:0}
.box{background:#141821;padding:24px;border-radius:10px;max-width:1200px;margin-top:30px}
input{padding:12px;width:260px;border-radius:6px;border:1px solid #2a3140;background:#0f1115;color:#e6e6e6}
button{padding:12px 18px;margin-left:10px;border-radius:6px;border:none;cursor:pointer;background:#3b82f6;color:white;opacity:.4}
button.enabled{opacity:1}
button.secondary{background:#1f2937;margin-top:14px}
button.hidden{display:none}
pre{background:#0b0e14;padding:18px;border-radius:8px;white-space:pre-wrap;line-height:1.6;color:#cbd5f5;min-height:120px}
.grid{display:grid;grid-template-columns:1fr 1fr;gap:18px;margin-top:18px}
.matrix{margin-top:18px;background:#0b0e14;border-radius:10px;padding:16px 18px;border:1px solid #1f2937}
.matrix.hidden{display:none}
.matrix-row{display:flex;justify-content:space-between;padding:8px 0;border-bottom:1px solid #1f2937}
.matrix-row:last-child{border-bottom:none}
.pill{font-size:12px;padding:3px 10px;border-radius:999px;font-weight:600}
.strong{background:#064e3b;color:#6ee7b7}
.weak{background:#3f2f1d;color:#fcd34d}
.missing{background:#3f1d1d;color:#fca5a5}
.dots::after{content:"";display:inline-block;width:1em;animation:ellipsis 1.4s infinite;opacity:.7}
@keyframes ellipsis{0%{content:""}25%{content:"."}50%{content:".."}75%{content:"..."}100%{content:""}}
</style>
</head>

<body>

<h1>AI-Assisted Website Security Surface Scan</h1>

<div class="box">
<label>Website domain</label><br><br>

<input
  id="domain"
  placeholder="e.g. yoursite.com"
  autocomplete="off"
  oninput="checkDomain()"
/>

<button
  id="scanBtn"
  disabled
  onclick="handleScan()"
>
Run AI surface scan
</button>

<div id="statusMatrix" class="matrix hidden">
  <strong>Surface Security Indicators</strong>
  <div id="matrixRows"></div>
</div>

<h2>Results</h2>
<div class="grid">
  <div>
    <h3>Summary for Decision-Makers</h3>
    <pre id="plainResults">Awaiting input<span class="dots"></span></pre>
  </div>
  <div>
    <h3>Technical Findings</h3>
    <pre id="techResults">Awaiting input<span class="dots"></span></pre>
  </div>
</div>

<button
  id="genReportBtn"
  class="secondary hidden"
  onclick="openReport()"
>
Generate advisory report
</button>
</div>

<script>
/* =========================
   STATE
========================= */

let scanCompleted = false;

/* =========================
   STATIC DATA
========================= */

const indicators=[
  {label:"HTTPS Transport",status:"STRONG"},
  {label:"HSTS",status:"MISSING"},
  {label:"Content Security Policy",status:"MISSING"},
  {label:"Clickjacking Protection",status:"WEAK"},
  {label:"MIME Sniffing Protection",status:"MISSING"},
  {label:"Referrer Policy",status:"MISSING"},
  {label:"Permissions Policy",status:"MISSING"}
];

/* =========================
   DOMAIN VALIDATION
========================= */

function isValidDomain(value){
  return /^[a-z0-9.-]+\.[a-z]{2,}$/i.test(value);
}

function checkDomain(){
  if(scanCompleted) return;

  const input=document.getElementById("domain");
  const btn=document.getElementById("scanBtn");
  const valid=isValidDomain(input.value.trim());

  btn.disabled=!valid;
  btn.classList.toggle("enabled",valid);
}

/* =========================
   BUTTON HANDLER
========================= */

function handleScan(){
  if(!scanCompleted){
    runScan();
  }else{
    resetScan();
  }
}

/* =========================
   SCAN LOGIC
========================= */

function runScan(){
  const input=document.getElementById("domain");
  const domain=input.value.trim();

  if(!isValidDomain(domain)){
    alert("Please enter a valid website domain before running the scan.");
    input.focus();
    return;
  }

  scanCompleted = true;

  renderMatrix();
  document.getElementById("statusMatrix").classList.remove("hidden");

  document.getElementById("plainResults").textContent=
`• Secure transport is present and functioning.
• Several modern security headers are not observed.
• No indicators of active compromise are visible.

Overall surface posture: MODERATE`;

  document.getElementById("techResults").textContent=
    indicators.map(i=>`${i.status} – ${i.label}`).join("\n");

  sessionStorage.setItem("scanDomain",domain);
  sessionStorage.setItem("scanIndicators",JSON.stringify(indicators));
  sessionStorage.setItem(
    "scanSummary",
    document.getElementById("plainResults").textContent
  );

  const btn=document.getElementById("scanBtn");
  btn.textContent="Refresh scan";
  btn.disabled=false;
  btn.classList.add("enabled");

  document.getElementById("genReportBtn").classList.remove("hidden");
}

/* =========================
   RESET LOGIC
========================= */

function resetScan(){
  scanCompleted = false;

  document.getElementById("domain").value="";
  document.getElementById("statusMatrix").classList.add("hidden");
  document.getElementById("genReportBtn").classList.add("hidden");

  document.getElementById("plainResults").innerHTML=
    "Awaiting input<span class='dots'></span>";
  document.getElementById("techResults").innerHTML=
    "Awaiting input<span class='dots'></span>";

  const btn=document.getElementById("scanBtn");
  btn.textContent="Run AI surface scan";
  btn.disabled=true;
  btn.classList.remove("enabled");

  sessionStorage.clear();
}

/* =========================
   HELPERS
========================= */

function renderMatrix(){
  const c=document.getElementById("matrixRows");
  c.innerHTML="";
  indicators.forEach(i=>{
    const r=document.createElement("div");
    r.className="matrix-row";
    r.innerHTML=
      `<span>${i.label}</span>
       <span class="pill ${i.status.toLowerCase()}">${i.status}</span>`;
    c.appendChild(r);
  });
}

function openReport(){
  window.location.href="report.html";
}
</script>

</body>
</html>
