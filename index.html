<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>AI-Assisted Website Security Surface Scan | Urban Sentinel</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<script src="https://cdn.jsdelivr.net/npm/jspdf@2.5.1/dist/jspdf.umd.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/qrcode/build/qrcode.min.js"></script>

<style>
body{
  font-family:system-ui;
  background:#0f1115;
  color:#e6e6e6;
  padding:40px;
  margin:0
}
.box{
  background:#141821;
  padding:24px;
  border-radius:10px;
  max-width:1200px;
  margin-top:30px
}
input{
  padding:12px;
  width:260px;
  border-radius:6px;
  border:1px solid #2a3140;
  background:#0f1115;
  color:#e6e6e6
}
button{
  padding:12px 18px;
  margin-left:10px;
  border-radius:6px;
  border:none;
  cursor:pointer;
  background:#3b82f6;
  color:white;
  opacity:.6
}
button.enabled{opacity:1}
button.refresh{background:#1f2937}
button.secondary{background:#1f2937;margin-top:10px}
button.hidden{display:none}

pre{
  background:#0b0e14;
  padding:18px;
  border-radius:8px;
  white-space:pre-wrap;
  line-height:1.6;
  color:#cbd5f5;
  min-height:120px
}

.grid{
  display:grid;
  grid-template-columns:1fr 1fr;
  gap:18px;
  margin-top:18px
}

/* MATRIX */
.matrix{
  margin-top:18px;
  background:#0b0e14;
  border-radius:10px;
  padding:16px 18px;
  border:1px solid #1f2937
}
.matrix.hidden{display:none}
.matrix-header{
  font-weight:600;
  margin-bottom:12px
}
.matrix-row{
  display:flex;
  justify-content:space-between;
  padding:8px 0;
  border-bottom:1px solid #1f2937
}
.matrix-row:last-child{border-bottom:none}
.pill{
  font-size:12px;
  padding:3px 10px;
  border-radius:999px;
  font-weight:600
}
.strong{background:#064e3b;color:#6ee7b7}
.weak{background:#3f2f1d;color:#fcd34d}
.missing{background:#3f1d1d;color:#fca5a5}

/* PDF modal */
#pdfModal{
  display:none;
  position:fixed;
  inset:0;
  background:rgba(0,0,0,.85);
  z-index:99999;
  align-items:center;
  justify-content:center
}
#pdfModal.active{display:flex}
#pdfFrame{
  width:90%;
  height:90%;
  background:#111;
  border-radius:10px;
  display:flex;
  flex-direction:column
}
#pdfHeader{
  padding:10px 14px;
  display:flex;
  justify-content:space-between;
  background:#141821;
  border-bottom:1px solid #2a3140
}
#pdfFrame iframe{flex:1;border:none;background:#fff}
</style>
</head>

<body>

<h1>AI-Assisted Website Security Surface Scan</h1>

<div class="box">
<label>Website domain</label><br><br>
<input id="domain" placeholder="e.g. yoursite.com" oninput="checkDomain()">
<button id="scanBtn" onclick="runScan()">Run AI surface scan</button>

<div id="statusMatrix" class="matrix hidden">
  <div class="matrix-header">Surface Security Indicators</div>
  <div id="matrixRows"></div>
</div>

<h2>Results</h2>
<div class="grid">
  <div>
    <h3>Summary for Decision-Makers</h3>
    <pre id="plainResults">Awaiting input</pre>
  </div>
  <div>
    <h3>Technical Findings</h3>
    <pre id="techResults">Awaiting input</pre>
  </div>
</div>

<button id="genPdfBtn" class="secondary hidden" onclick="generatePDF()">Generate advisory report</button>
</div>

<div id="pdfModal">
  <div id="pdfFrame">
    <div id="pdfHeader">
      <strong>Advisory Report</strong>
      <button onclick="closePdf()">Close</button>
    </div>
    <iframe id="pdfPreview"></iframe>
  </div>
</div>

<script>
const { jsPDF } = window.jspdf;
let pdfBlobUrl=null;

/* REAL LOGO BASE64 GOES HERE */
const LOGO_SRC="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mP8z8BQDwAFgwJ/l4W2WAAAAABJRU5ErkJggg==";

const COMPANY={
  name:"Urban Sentinel Pty Ltd",
  abn:"18 688 705 268",
  site:"https://urbansentinel.com.au",
  email:"admin@urbansentinel.com.au"
};

const indicators=[
  {label:"HTTPS Transport",status:"STRONG"},
  {label:"HSTS",status:"MISSING"},
  {label:"Content Security Policy",status:"MISSING"},
  {label:"Clickjacking Protection",status:"WEAK"},
  {label:"MIME Sniffing Protection",status:"MISSING"},
  {label:"Referrer Policy",status:"MISSING"},
  {label:"Permissions Policy",status:"MISSING"}
];

function checkDomain(){
  const v=document.getElementById("domain").value.trim();
  const btn=document.getElementById("scanBtn");
  if(v){
    btn.classList.add("enabled");
    btn.disabled=false;
  }else{
    btn.classList.remove("enabled");
    btn.disabled=true;
  }
}
checkDomain();

function runScan(){
  renderMatrix();
  document.getElementById("statusMatrix").classList.remove("hidden");
  document.getElementById("plainResults").textContent=
`• Secure transport is present.
• Several controls are missing or partially implemented.
• No indicators of compromise observed.

Overall surface posture: MODERATE`;
  document.getElementById("techResults").textContent=
    indicators.map(i=>`${i.status} – ${i.label}`).join("\n");
  document.getElementById("genPdfBtn").classList.remove("hidden");
}

function renderMatrix(){
  const c=document.getElementById("matrixRows");
  c.innerHTML="";
  indicators.forEach(i=>{
    const row=document.createElement("div");
    row.className="matrix-row";
    row.innerHTML=`<span>${i.label}</span>
      <span class="pill ${i.status.toLowerCase()}">${i.status}</span>`;
    c.appendChild(row);
  });
}

function header(doc,page){
  if(page>1){
    doc.addImage(LOGO_SRC,"PNG",14,10,10,10);
    doc.setFontSize(8);
    doc.text(`${COMPANY.name} | ABN ${COMPANY.abn}`,28,15);
    doc.text(COMPANY.site,28,20);
  }
}

function footer(doc,page,total){
  doc.setFontSize(8);
  doc.text(`Page ${page} of ${total}`,105,290,{align:"center"});
}

function generatePDF(){
  const doc=new jsPDF();
  const domain=document.getElementById("domain").value.trim();
  const ts=new Date().toLocaleString();

  /* COVER */
  doc.addImage(LOGO_SRC,"PNG",70,80,70,70);
  doc.setFontSize(16);
  doc.text("AI-Assisted Website Security Surface Scan",105,170,{align:"center"});
  doc.setFontSize(10);
  doc.text(domain,105,180,{align:"center"});
  doc.text(ts,105,186,{align:"center"});

  /* INDICATORS */
  doc.addPage();
  header(doc,2);
  doc.setFontSize(12);
  doc.text("Surface Security Indicators",14,40);
  doc.setFontSize(10);
  indicators.forEach((i,idx)=>{
    doc.text(`${i.status} – ${i.label}`,14,50+(idx*8));
  });

  /* DISCLOSURE */
  doc.addPage();
  header(doc,3);
  doc.setFontSize(12);
  doc.text("Assessment Integrity & Disclosure",14,40);
  doc.setFontSize(10);
  doc.text(
`This report was generated using automated analysis of publicly observable website behaviour at the time of assessment.

Findings are based on actual data observed during the scan and were not fabricated or manually altered.

The assessment is time-specific and reflects configuration indicators only.

No intrusive testing was performed. This report does not confirm compromise, vulnerability, or legal compliance.`,
14,50,{maxWidth:180});

  /* QR */
  QRCode.toDataURL(COMPANY.site,(e,url)=>{
    doc.addImage(url,"PNG",160,240,30,30);
    const total=doc.getNumberOfPages();
    for(let i=1;i<=total;i++){
      doc.setPage(i);
      footer(doc,i,total);
    }
    const blob=doc.output("blob");
    pdfBlobUrl=URL.createObjectURL(blob);
    document.getElementById("pdfPreview").src=pdfBlobUrl;
    document.getElementById("pdfModal").classList.add("active");
  });
}

function closePdf(){
  document.getElementById("pdfModal").classList.remove("active");
}
</script>

</body>
</html>
