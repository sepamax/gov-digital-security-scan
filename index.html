<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>AI Website Security Surface Scan | Urban Sentinel</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="description"
    content="AI-assisted, non-intrusive website security surface scan using publicly observable HTTP response headers only." />

  <!-- jsPDF -->
  <script src="https://cdn.jsdelivr.net/npm/jspdf@2.5.1/dist/jspdf.umd.min.js"></script>

  <style>
    body {
      background: #0f1115;
      color: #e6e6e6;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      padding: 40px;
      margin: 0;
    }

    h1 {
      font-size: 2.3rem;
      margin-bottom: 8px;
    }

    p {
      color: #b6bcc8;
      max-width: 900px;
      line-height: 1.6;
    }

    .scan-box {
      margin-top: 32px;
      background: #141821;
      padding: 26px;
      border-radius: 10px;
      max-width: 940px;
    }

    label {
      font-weight: 600;
    }

    input {
      padding: 12px;
      width: 280px;
      background: #0f1115;
      color: #e6e6e6;
      border: 1px solid #2a3140;
      border-radius: 6px;
      font-size: 1rem;
    }

    button {
      padding: 12px 18px;
      background: #3b82f6;
      color: #fff;
      border: none;
      border-radius: 6px;
      font-size: 1rem;
      cursor: pointer;
      margin-right: 10px;
      margin-top: 10px;
    }

    button.secondary {
      background: #1f2937;
    }

    button.hidden {
      display: none;
    }

    button:hover {
      opacity: 0.9;
    }

    pre {
      margin-top: 26px;
      background: #0b0e14;
      padding: 22px;
      border-radius: 8px;
      color: #cbd5f5;
      white-space: pre-wrap;
      font-size: 0.95rem;
      line-height: 1.5;
    }

    .actions {
      margin-top: 18px;
    }

    .footer {
      margin-top: 60px;
      font-size: 0.85rem;
      color: #8b92a8;
      max-width: 940px;
    }
  </style>
</head>

<body>

  <h1>AI-Assisted Website Security Surface Scan</h1>

  <p>
    This tool uses AI-assisted logic to interpret publicly observable website security
    signals, limited to HTTP response headers. The assessment is advisory and non-intrusive.
  </p>

  <p>
    No authentication, exploitation, traffic manipulation, or bypass techniques are used.
    Results are intended for risk awareness, uplift planning, and documentation support.
  </p>

  <div class="scan-box">
    <label for="domain">Website domain</label><br /><br />

    <input id="domain" placeholder="example.com" />
    <button onclick="runScan()">Run AI surface scan</button>

    <pre id="output">Awaiting input‚Ä¶</pre>

    <div class="actions">
      <button id="viewBtn" class="secondary hidden" onclick="openReportTab()">
        View / Save report
      </button>

      <button id="pdfBtn" class="secondary hidden" onclick="downloadPDF()">
        Download PDF
      </button>
    </div>
  </div>

  <div class="footer">
    <strong>Methodology & Disclaimer</strong><br />
    This assessment is generated using AI-assisted interpretation of publicly observable
    HTTP response headers only. It is not a penetration test, certification, or compliance audit.
  </div>

  <script>
    let lastReportText = "";
    let lastDomain = "";

    async function runScan() {
      const domainInput = document.getElementById("domain");
      const output = document.getElementById("output");
      const viewBtn = document.getElementById("viewBtn");
      const pdfBtn = document.getElementById("pdfBtn");

      let domain = domainInput.value.trim();

      if (!domain) {
        output.textContent = "‚ùå Please enter a valid domain.";
        return;
      }

      if (!domain.startsWith("http")) {
        domain = "https://" + domain;
      }

      lastDomain = domain.replace(/^https?:\/\//, "");
      viewBtn.classList.add("hidden");
      pdfBtn.classList.add("hidden");

      output.textContent =
        "ü§ñ AI surface scan in progress for " + domain + "...\n\n" +
        "Collecting publicly observable security headers...\n";

      try {
        const response = await fetch(
          "https://api.allorigins.win/raw?url=" + encodeURIComponent(domain)
        );

        const headers = response.headers;

        const checks = [
          ["Strict-Transport-Security", "HSTS"],
          ["Content-Security-Policy", "Content Security Policy"],
          ["X-Frame-Options", "Clickjacking Protection"],
          ["X-Content-Type-Options", "MIME Sniffing Protection"],
          ["Referrer-Policy", "Referrer Policy"],
          ["Permissions-Policy", "Permissions Policy"]
        ];

        let missing = 0;
        let report =
          "AI-Assisted Website Security Surface Scan\n\n";

        checks.forEach(([header, label]) => {
          const value = headers.get(header);
          if (value) {
            report += `‚úî ${label}: PRESENT\n`;
          } else {
            report += `‚ö† ${label}: NOT DETECTED\n`;
            missing++;
          }
        });

        let risk =
          missing >= 4 ? "HIGH" :
          missing >= 2 ? "MODERATE" :
          "LOW";

        report += `\nOverall surface risk level: ${risk}\n\n`;
        report +=
          "Interpretation notes:\n" +
          "- Findings reflect surface-level exposure only\n" +
          "- Missing headers indicate increased risk, not confirmed vulnerabilities\n" +
          "- No intrusive testing was performed\n";

        lastReportText = report;
        output.textContent = report;

        viewBtn.classList.remove("hidden");
        pdfBtn.classList.remove("hidden");

      } catch (err) {
        output.textContent =
          "‚ùå Unable to retrieve public headers.\n\n" +
          "This may be due to request blocking or network configuration.\n" +
          "It does not imply a security failure.";
      }
    }

    function openReportTab() {
      const reportWindow = window.open("", "_blank");
      reportWindow.document.write(`
        <html>
          <head>
            <title>AI Security Surface Scan Report</title>
            <style>
              body {
                font-family: system-ui, sans-serif;
                padding: 40px;
                line-height: 1.6;
              }
              h1 { margin-bottom: 10px; }
              pre {
                background: #f4f4f4;
                padding: 20px;
                white-space: pre-wrap;
              }
            </style>
          </head>
          <body>
            <h1>AI-Assisted Website Security Surface Scan</h1>
            <p><strong>Domain:</strong> ${lastDomain}</p>
            <p><strong>Generated:</strong> ${new Date().toLocaleString()}</p>
            <pre>${lastReportText}</pre>
            <p>
              <strong>Disclaimer:</strong><br />
              Advisory assessment based solely on publicly observable HTTP response headers.
              Not a penetration test or compliance certification.
            </p>
          </body>
        </html>
      `);
      reportWindow.document.close();
    }

    function downloadPDF() {
      const { jsPDF } = window.jspdf;
      const doc = new jsPDF();
      const timestamp = new Date().toLocaleString();

      doc.setFontSize(14);
      doc.text("Urban Sentinel", 14, 20);
      doc.setFontSize(12);
      doc.text("AI-Assisted Website Security Surface Scan", 14, 30);

      doc.setFontSize(10);
      doc.text(`Domain: ${lastDomain}`, 14, 40);
      doc.text(`Generated: ${timestamp}`, 14, 46);

      doc.setFontSize(10);
      doc.text(lastReportText, 14, 60, { maxWidth: 180 });

      doc.addPage();
      doc.text(
        "Disclaimer:\n\n" +
        "This report is advisory only and generated using AI-assisted\n" +
        "interpretation of publicly observable HTTP response headers.\n" +
        "It is not a penetration test, certification, or compliance audit.",
        14,
        20
      );

      doc.save(`urban-sentinel-ai-surface-scan-${lastDomain}.pdf`);
    }
  </script>

</body>
</html>
