<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Digital Security Surface Scan | Urban Sentinel</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="description" content="Non-intrusive website security surface scan using publicly observable HTTP response headers only. Advisory assessment for organisations." />

  <!-- jsPDF -->
  <script src="https://cdn.jsdelivr.net/npm/jspdf@2.5.1/dist/jspdf.umd.min.js"></script>

  <style>
    body {
      background: #0f1115;
      color: #e6e6e6;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      padding: 40px;
      margin: 0;
    }

    h1 {
      font-size: 2.2rem;
      margin-bottom: 10px;
    }

    p {
      color: #b6bcc8;
      max-width: 820px;
      line-height: 1.6;
    }

    .scan-box {
      margin-top: 30px;
      background: #141821;
      padding: 24px;
      border-radius: 8px;
      max-width: 860px;
    }

    input {
      padding: 12px;
      width: 260px;
      background: #0f1115;
      color: #e6e6e6;
      border: 1px solid #2a3140;
      border-radius: 4px;
      font-size: 1rem;
    }

    button {
      padding: 12px 18px;
      margin-left: 10px;
      background: #3b82f6;
      color: #fff;
      border: none;
      border-radius: 4px;
      font-size: 1rem;
      cursor: pointer;
    }

    button.secondary {
      background: #1f2937;
    }

    button:hover {
      opacity: 0.9;
    }

    pre {
      margin-top: 25px;
      background: #0b0e14;
      padding: 20px;
      border-radius: 6px;
      color: #cbd5f5;
      white-space: pre-wrap;
      font-size: 0.95rem;
      line-height: 1.45;
    }

    .footer {
      margin-top: 50px;
      font-size: 0.85rem;
      color: #8b92a8;
      max-width: 860px;
    }
  </style>
</head>

<body>

  <h1>Website Security Surface Scan</h1>
  <p>
    Advisory, non-intrusive assessment based solely on publicly observable HTTP response headers.
    No authentication, probing, exploitation, or bypass techniques are used.
  </p>

  <div class="scan-box">
    <strong>Website domain</strong><br /><br />

    <input id="domain" placeholder="example.com" />
    <button onclick="runScan()">Run surface scan</button>
    <button class="secondary" onclick="downloadPDF()">Download PDF report</button>

    <pre id="output">Awaiting input‚Ä¶</pre>
  </div>

  <div class="footer">
    <strong>Important notice:</strong><br />
    This report is advisory only and does not constitute a penetration test,
    certification, or compliance audit. Findings are based solely on publicly
    observable response headers at the time of assessment.
  </div>

  <script>
    let lastReportText = "";
    let lastDomain = "";

    async function runScan() {
      const domainInput = document.getElementById("domain");
      const output = document.getElementById("output");
      let domain = domainInput.value.trim();

      if (!domain) {
        output.textContent = "‚ùå Please enter a valid domain.";
        return;
      }

      if (!domain.startsWith("http")) {
        domain = "https://" + domain;
      }

      lastDomain = domain.replace(/^https?:\/\//, "");

      output.textContent =
        "üîç Running public header inspection for " + domain + "...\n\n";

      try {
        const response = await fetch(
          "https://api.allorigins.win/raw?url=" + encodeURIComponent(domain)
        );

        const headers = response.headers;

        const checks = [
          ["Strict-Transport-Security", "HSTS"],
          ["Content-Security-Policy", "Content Security Policy"],
          ["X-Frame-Options", "Clickjacking Protection"],
          ["X-Content-Type-Options", "MIME Sniffing Protection"],
          ["Referrer-Policy", "Referrer Policy"],
          ["Permissions-Policy", "Permissions Policy"]
        ];

        let missing = 0;
        let report = "Header assessment results:\n\n";

        checks.forEach(([header, label]) => {
          const value = headers.get(header);
          if (value) {
            report += `‚úî ${label}: PRESENT\n`;
          } else {
            report += `‚ö† ${label}: NOT DETECTED\n`;
            missing++;
          }
        });

        let risk =
          missing >= 4 ? "HIGH" :
          missing >= 2 ? "MODERATE" :
          "LOW";

        report += `\nOverall surface risk level: ${risk}\n\n`;
        report +=
          "Methodology:\n" +
          "- Public HTTP response header inspection only\n" +
          "- No authentication or intrusive testing\n" +
          "- No vulnerability exploitation\n";

        lastReportText = report;
        output.textContent = report;

      } catch (err) {
        output.textContent =
          "‚ùå Unable to retrieve headers.\n\n" +
          "This may be due to request blocking or network configuration.\n" +
          "It does not imply a security failure.";
      }
    }

    function downloadPDF() {
      if (!lastReportText) {
        alert("Run a scan before generating a PDF.");
        return;
      }

      const { jsPDF } = window.jspdf;
      const doc = new jsPDF();

      const timestamp = new Date().toLocaleString();

      doc.setFontSize(14);
      doc.text("Urban Sentinel", 14, 20);
      doc.setFontSize(12);
      doc.text("Website Security Surface Scan Report", 14, 30);

      doc.setFontSize(10);
      doc.text(`Domain: ${lastDomain}`, 14, 40);
      doc.text(`Generated: ${timestamp}`, 14, 46);

      doc.setFontSize(10);
      doc.text(lastReportText, 14, 58, { maxWidth: 180 });

      doc.addPage();
      doc.text(
        "Disclaimer:\n\n" +
        "This report is advisory only and based solely on publicly observable\n" +
        "HTTP response headers. It does not constitute a penetration test,\n" +
        "certification, or compliance assessment.",
        14,
        20
      );

      doc.save(`urban-sentinel-security-scan-${lastDomain}.pdf`);
    }
  </script>

</body>
</html>
